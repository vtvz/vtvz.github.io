(window.webpackJsonpmain=window.webpackJsonpmain||[]).push([[2],{10:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var n=a(0),r=a.n(n),l=a(2);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e){var a,n;c(this,t);for(var r=arguments.length,l=new Array(r>1?r-1:0),i=1;i<r;i++)l[i-1]=arguments[i];return(n=u(this,(a=m(t)).call.apply(a,[this,e].concat(l)))).emoji=new EmojiConvertor,n.emoji.replace_mode="unified",n.emoji.allow_native=!0,n.state={link:"",text:"",tweet:"",tags:""},n}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),a=t,(n=[{key:"componentDidMount",value:function(){this.applyCollection("posts")}},{key:"applyCollection",value:function(e){var t=this.props.data[e],a=this.compileText(this.normalizeText(t.excerpt)),n=this.compileText(this.normalizeText(t.description));this.setState({link:t.link,text:a,tweet:n,tags:t.tags.join(" ")},this.recalculateHeights)}},{key:"normalizeText",value:function(e){var t=function(e){return e.replace(/[\s]+/g," ").trim()};return $("<div>".concat(e,"</div>")).find("> *").map((function(e,a){return t($(a).text())})).toArray().join("\n").trim()||t(e.trim())}},{key:"recalculateHeights",value:function(){$(".article-post-generator-textarea").each((function(e,t){t.style.height="auto",t.style.height=t.scrollHeight+10+"px"}))}},{key:"handleCollectionChange",value:function(e){var t=e.target.value;t&&this.applyCollection(t)}},{key:"handleChange",value:function(e,t){var a=t.target.value,n=function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},e,a);"text"===e&&this.state.text===this.state.tweet&&(n.tweet=a),this.setState(n,this.recalculateHeights)}},{key:"textareaSelect",value:function(e){e.target.select()}},{key:"ucfirst",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"camelize",value:function(e){var t=this;return e.split("-").map((function(e,a){return a?t.ucfirst(e):e})).join("")}},{key:"compileTags",value:function(){var e=this;return this.state.tags.split(/[\s,]/).filter((function(e){return e})).map((function(e){return"#"+e.replace(/^#/g,"")})).map((function(t){return e.camelize(t)})).join(" ")}},{key:"compileLink",value:function(e){try{var t=new URL(this.state.link);return t.searchParams.append("utm",e),t.toString()}catch(e){return this.state.link}}},{key:"compileText",value:function(e){return this.emoji.replace_colons(e.trim().split("\n").map((function(e){return e.trim()})).join("\n"))}},{key:"generateGeneric",value:function(e){return this.compileText("\n            ".concat(this.state.text,"\n            \n            ").concat(this.compileLink(e),"\n            \n            P.S. Подписывайтесь на канал в Telegram https://t.me/blog_vtvz\n            \n            ").concat(this.compileTags(),"\n        "))}},{key:"generateVKPage",value:function(){return this.compileText("\n            ".concat(this.state.text,"\n            \n            ").concat(this.compileLink(l.a.vkPage),"\n            \n            P.S. Подписывайтесь на канал в Telegram https://t.me/blog_vtvz и *blog_vtvz (страницу в ВК)\n            \n            ").concat(this.compileTags(),"\n        "))}},{key:"generateVKGroup",value:function(){return this.generateGeneric(l.a.vkGroup)}},{key:"generateLinkedIn",value:function(){return this.generateGeneric(l.a.linkedIn)}},{key:"generateFacebook",value:function(){return this.generateGeneric(l.a.facebook)}},{key:"generateTelegram",value:function(){return this.compileText("\n            ".concat(this.state.text,"\n            \n            ").concat(this.compileLink(l.a.telegram),"\n            \n            ").concat(this.compileTags(),"\n        "))}},{key:"generateTwitter",value:function(){return this.compileText("\n            ".concat(this.state.tweet,"\n\n            ").concat(this.compileLink(l.a.twitter),"\n            \n            ").concat(this.compileTags(),"\n        "))}},{key:"render",value:function(){var e=this,t=this.generateLinkedIn(),a=this.generateTwitter(),n=1300-o(t).length,l=280-o(a).length+this.compileLink("twitter").length-23;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Применить"),r.a.createElement("select",{onChange:this.handleCollectionChange.bind(this),value:""},r.a.createElement("option",{value:""},"Применить последний пост из коллекции"),Object.keys(this.props.data).map((function(t){return r.a.createElement("option",{key:t,value:t},e.ucfirst(t))})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Ссылка"),r.a.createElement("input",{type:"text",value:this.state.link,onChange:this.handleChange.bind(this,"link")})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Содержание ",r.a.createElement("small",{className:n>=0?"text-muted":"text-danger"},"(",n,")")),r.a.createElement("textarea",{value:this.state.text,onChange:this.handleChange.bind(this,"text")})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Твит ",r.a.createElement("small",{className:l>=0?"text-muted":"text-danger"},"(",l,")")),r.a.createElement("textarea",{value:this.state.tweet,onChange:this.handleChange.bind(this,"tweet")})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Теги"),r.a.createElement("input",{type:"text",value:this.state.tags,onChange:this.handleChange.bind(this,"tags")})),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"ВКонтакте (группа)"),r.a.createElement("textarea",{onClick:this.textareaSelect,className:"article-post-generator-textarea",readOnly:!0,value:this.generateVKGroup()})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"ВКонтакте (страница)"),r.a.createElement("textarea",{onClick:this.textareaSelect,className:"article-post-generator-textarea",readOnly:!0,value:this.generateVKPage()})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Facebook"),r.a.createElement("textarea",{onClick:this.textareaSelect,className:"article-post-generator-textarea",readOnly:!0,value:this.generateFacebook()})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"LinkedIn"),r.a.createElement("textarea",{onClick:this.textareaSelect,className:"article-post-generator-textarea",readOnly:!0,value:t})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Telegram"),r.a.createElement("textarea",{onClick:this.textareaSelect,className:"article-post-generator-textarea",readOnly:!0,value:this.generateTelegram()})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Twitter"),r.a.createElement("textarea",{onClick:this.textareaSelect,className:"article-post-generator-textarea",readOnly:!0,value:a})))}}])&&s(a.prototype,n),i&&s(a,i),t}(n.Component)}}]);